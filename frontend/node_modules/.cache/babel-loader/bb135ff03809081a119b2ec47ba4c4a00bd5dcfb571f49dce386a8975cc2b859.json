{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./App.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BASE_URL=process.env.REACT_APP_API_BASE_URL||'http://localhost:3001';function App(){const[quizList,setQuizList]=useState([]);const[currentIndex,setCurrentIndex]=useState(0);const[answer,setAnswer]=useState('');const[result,setResult]=useState('');const[correctCount,setCorrectCount]=useState(0);const[isQuizFinished,setIsQuizFinished]=useState(false);useEffect(()=>{const API_URL=`${BASE_URL}/api/quiz`;fetch(API_URL).then(res=>res.json()).then(data=>{const shuffled=[...data].sort(()=>Math.random()-0.5);setQuizList(shuffled);});},[]);if(quizList.length===0)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});const quiz=quizList[currentIndex];const handleSubmit=e=>{e.preventDefault();const normalize=str=>str.trim().toLowerCase().replace(/[„Éª\\s\\-„ÉºÔºø]/g,'');const isCorrect=normalize(answer)===normalize(quiz.answer);setResult(isCorrect?'Ê≠£Ëß£ÔºÅ':'‰∏çÊ≠£Ëß£...Ê≠£Ëß£„ÅØ„Äå'+quiz.answer+'„Äç„Åß„Åô');if(isCorrect){setCorrectCount(prev=>prev+1);}};const handleNext=()=>{if(currentIndex+1<quizList.length){setCurrentIndex(prev=>prev+1);setAnswer('');setResult('');}else{setIsQuizFinished(true);// ÊúÄÂæå„ÅÆÂïèÈ°å„ÅåÁµÇ„Çè„Å£„Åü„ÇâÁµÇ‰∫Ü„Éï„É©„Ç∞\n}};const resetQuiz=()=>{const shuffled=[...quizList].sort(()=>Math.random()-0.5);setQuizList(shuffled);setCurrentIndex(0);setAnswer('');setResult('');setCorrectCount(0);setIsQuizFinished(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:isQuizFinished?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u30AF\\u30A4\\u30BA\\u7D42\\u4E86\\uFF01\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u3042\\u306A\\u305F\\u306E\\u6B63\\u89E3\\u6570\\u306F \",correctCount,\" / \",quizList.length,\" \\u554F\\u3067\\u3059\\u3002\"]}),correctCount===quizList.length&&/*#__PURE__*/_jsx(\"p\",{style:{color:'gold',fontWeight:'bold'},children:\"\\uD83C\\uDF89\\u7D20\\u6674\\u3089\\u3057\\u3044\\uFF01\\u3042\\u306A\\u305F\\u306F\\u30DF\\u30B9\\u30C9\\u30DE\\u30B9\\u30BF\\u30FC\\u3067\\u3059\\uFF01\\uFF01\\uD83C\\uDF89\"}),/*#__PURE__*/_jsx(\"button\",{onClick:resetQuiz,children:\"\\u3082\\u3046\\u4E00\\u5EA6\\u6311\\u6226\\u3059\\u308B\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:quiz.question}),/*#__PURE__*/_jsx(\"img\",{src:`${BASE_URL}${quiz.image}`,alt:\"quiz\",width:\"300\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:answer,onChange:e=>setAnswer(e.target.value),disabled:!!result}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!!result,children:\"\\u56DE\\u7B54\\u3059\\u308B\"})]}),result&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:result}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNext,children:\"\\u6B21\\u306E\\u554F\\u984C\\u3078\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u6B63\\u89E3\\u6570: \",correctCount,\" / \",quizList.length]})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BASE_URL","process","env","REACT_APP_API_BASE_URL","App","quizList","setQuizList","currentIndex","setCurrentIndex","answer","setAnswer","result","setResult","correctCount","setCorrectCount","isQuizFinished","setIsQuizFinished","API_URL","fetch","then","res","json","data","shuffled","sort","Math","random","length","children","quiz","handleSubmit","e","preventDefault","normalize","str","trim","toLowerCase","replace","isCorrect","prev","handleNext","resetQuiz","className","style","color","fontWeight","onClick","question","src","image","alt","width","onSubmit","type","value","onChange","target","disabled"],"sources":["/home/ocmai/dev/mister_donut_quiz/frontend/src/App.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './App.css';\r\n\r\nconst BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:3001';\r\n\r\nfunction App() {\r\n  const [quizList, setQuizList] = useState([]);\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [answer, setAnswer] = useState('');\r\n  const [result, setResult] = useState('');\r\n  const [correctCount, setCorrectCount] = useState(0);\r\n  const [isQuizFinished, setIsQuizFinished] = useState(false);\r\n\r\nuseEffect(() => {\r\n    const API_URL = `${BASE_URL}/api/quiz`;\r\n\r\n    fetch(API_URL)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        const shuffled = [...data].sort(() => Math.random() - 0.5);\r\n        setQuizList(shuffled);\r\n      });\r\n  }, []);\r\n\r\n  if (quizList.length === 0) return <div>Loading...</div>;\r\n\r\n  const quiz = quizList[currentIndex];\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const normalize = (str) =>\r\n    str.trim().toLowerCase().replace(/[„Éª\\s\\-„ÉºÔºø]/g, '');\r\n\r\n    const isCorrect = normalize(answer) === normalize(quiz.answer);\r\n    \r\n    setResult(isCorrect ? 'Ê≠£Ëß£ÔºÅ' : '‰∏çÊ≠£Ëß£...Ê≠£Ëß£„ÅØ„Äå'+ quiz.answer +'„Äç„Åß„Åô');\r\n    if (isCorrect) {\r\n    setCorrectCount(prev => prev + 1);\r\n    }\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (currentIndex + 1 < quizList.length) {\r\n    setCurrentIndex(prev => prev + 1);\r\n    setAnswer('');\r\n    setResult('');\r\n    } else {\r\n    setIsQuizFinished(true); // ÊúÄÂæå„ÅÆÂïèÈ°å„ÅåÁµÇ„Çè„Å£„Åü„ÇâÁµÇ‰∫Ü„Éï„É©„Ç∞\r\n    }\r\n  };\r\n\r\n  const resetQuiz = () => {\r\n  const shuffled = [...quizList].sort(() => Math.random() - 0.5);\r\n  setQuizList(shuffled);\r\n  setCurrentIndex(0);\r\n  setAnswer('');\r\n  setResult('');\r\n  setCorrectCount(0);\r\n  setIsQuizFinished(false);\r\n};\r\n\r\n  return (\r\n    <div className=\"App\">\r\n    {isQuizFinished ? (\r\n      <div>\r\n        <h2>„ÇØ„Ç§„Ç∫ÁµÇ‰∫ÜÔºÅ</h2>\r\n        <p>„ÅÇ„Å™„Åü„ÅÆÊ≠£Ëß£Êï∞„ÅØ {correctCount} / {quizList.length} Âïè„Åß„Åô„ÄÇ</p>\r\n        {correctCount === quizList.length && (\r\n      „ÄÄ<p style={{ color: 'gold', fontWeight: 'bold' }}>üéâÁ¥†Êô¥„Çâ„Åó„ÅÑÔºÅ„ÅÇ„Å™„Åü„ÅØ„Éü„Çπ„Éâ„Éû„Çπ„Çø„Éº„Åß„ÅôÔºÅÔºÅüéâ</p>\r\n        )}\r\n        <button onClick={resetQuiz}>„ÇÇ„ÅÜ‰∏ÄÂ∫¶ÊåëÊà¶„Åô„Çã</button>\r\n      </div>\r\n    ) : (\r\n      <>\r\n        <h2>{quiz.question}</h2>\r\n        <img src={`${BASE_URL}${quiz.image}`} alt=\"quiz\" width=\"300\" />\r\n        <form onSubmit={handleSubmit}>\r\n          <input\r\n            type=\"text\"\r\n            value={answer}\r\n            onChange={e => setAnswer(e.target.value)}\r\n            disabled={!!result}\r\n          />\r\n          <button type=\"submit\" disabled={!!result}>ÂõûÁ≠î„Åô„Çã</button>\r\n        </form>\r\n        {result && (\r\n          <>\r\n            <p>{result}</p>\r\n            <button onClick={handleNext}>Ê¨°„ÅÆÂïèÈ°å„Å∏</button>\r\n          </>\r\n        )}\r\n        <p>Ê≠£Ëß£Êï∞: {correctCount} / {quizList.length}</p>\r\n      </>\r\n    )}\r\n  </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}